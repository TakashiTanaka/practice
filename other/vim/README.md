# vimの練習

vimと打つと立ち上がる
`vimtutor`でチュートリアルが見れる
モードを抜けたい時はEscapeかControl + \[かControl + C
## モード
### ノーマルモード

|コマンド|効果|
|--------|----|
|h / j / k / l|左/下/上/右|
|Control + u|半画面分上へ（多分upの意味）|
|Control + d|半画面分下へ（多分downの意味）|
|a|カーソルがある行の末尾にカーソルが移動し、insertモードになる|
|^|行頭へ移動|
|$|行末へ移動(Shift押しながら)|
|f|fを押した後に移動したい文字を入力するとそこまで移動|
|;を押していくと候補移動|
|%|(),[],{}の対応するカッコへジャンプする|
|x|一文字単位の削除|
|dd|行単位の削除|
|dw|単語の末尾まで削除|
|d$|カーソル位置から行末尾まで削除|
|任意の数字dd|複数行削除（例：5ddは五行削除）|
|p|カーソル後に貼り付け|
|P|カーソル前に貼り付け|
|y|コピー（yankというらしい）|
|yy|一行コピー|
|/検索したい文字列|検索（検索した後のハイライトは:nohで|消せる）|
|n|下方向に検索|
|N|上方向に検索|
|\*|いまカーソルがある位置の単語を検索（下方向）|
|\#|いまカーソルがある位置の単語を検索（上方向）|
|u|undo|
|Control + r|redo|
|gt|タブの切替|
|.|直前のコマンドを実行|
|=|インデントを揃える|
|cit|テキストを編集（c->change, i->inner, t->tag）|
|di（カッコ終わり記号）|対応するカッコ内の文字を削除する（例：di\),di\],ditなど）|
|yyp|カーソルがある行をコピーして、次の行にペースト|
|ddp|カーソルがある行をカットして、次の行にペースト|
|gg|ファイルの先頭まで戻る|
|G|ファイルの最後まで戻る|
|w / b|単語の区切りで移動|
|e / ge|単語の末尾に進む/単語の末尾に戻る|
|o|カーソルのある行の下に行を追加、インサートモードへ|
|O|カーソルのある行の上に行を追加、インサートモードへ|

### 入力モード\(i)
|コマンド|効果|
|--------|----|
|Control + F|一画面下に移動
|Control + B|一画面上に移動
|Control + N|入力補完

### コマンドモード（:の後にコマンド）

|コマンド|効果|
|--------|----|
|:w|保存|
|:w ファイル名|別名保存|
|:q|終了|
|:q!|強制終了T|
|:e ファイル名|ファイルを開く|
|:s/検索語/置換語/|マッチした最初の箇所を置換T|
|:s/検索語/置換語/g|マッチした行内の全てを置換|
|:%s/検索語/置換語/g|マッチしたファイル内の全ての箇所を置換|
|:%s/検索語/置換語/gc|マッチしたファイル内の全ての箇所を置換（確認有Ver）|
|:sp|上下に分割 |
|:vs|左右に分割|
|:close|分割した画面を閉じる|
|:tabnew|新しいタブを開く|
|:tabe ファイル名|新しいタブで指定したファイルを開く|
|:tabclose|タブを閉じる|
|:tabdo 操作|全てのタブで指定した操作を実行する|
|:set number|行番号を表示する|
|:set nonumber|行番号を非表示にする|
|:sintax on / :sintax off|シンタックスハイライト|
|:set tabstop=number|タブの文字数を規定する|
|:set ignorecase|大文字小文字の区別をなくす|
|:set noignorecase|ignorecaseを解除 |

### ビジュアルモード（v）

|コマンド|効果|
|--------|----|
|v|文字選択|
|V|行選択|
|Control + v|矩形選択|
|gg V G|全選択|
|Control + v のち Shift + i|矩形選択後に編集|


### その他
-.vimrc
	.vimrcというファイルを作ってカスタムすることができる。なお、vscode-neovimだとinit.vimというファイルを作ってそこに書く

### 組み合わせ技
- 行末に文字を挿入
	1. Control + vで矩形モードへ
	1. jでカーソルを移動して対象の行を選択
	1. $で行末まで選択
	1. Shift + a で挿入モードへ
	1. カーソルが選択範囲の先頭行の行末へ
	1. この状態でテキストを入力
	1. モードを抜けると選択していたすべての行の行末に挿入される

### .vimrcの書き方
- 変数を使うことができる
	```
	let variable = 0
	```
- 変数は接頭辞によってスコープが決まる

	|接頭辞|スコープ|
	|------|--------|
	|g:|グローバル|
	|b:|バッファローカル|
	|w:|ウィンドウローカル|
	|t:|タブページローカル|
	|s:|スクリプトローカル|
	|l:|関数ローカル|
	|v:|組み込み関数|

- 変数の削除
	unletコマンドを使うと変数を未定義の状態にできる
	```
	unlet variable

	"!をつけると存在しない変数を削除しようとした時のエラーを無視する
	unlet! variable
	```
	
- 環境変数
	```
	echo $PATH
	```
- オプション
	- オプションの値には真偽値（0 or 1）／数値／文字列がある
	- オプションの設定には:setコマンドを使う。スペース区切りで複数オプションを同時に設定できる。文字列のオプションにスペースを含めたい場合は\でエスケープする
- キーマッピング
	- キーマッピングにはmapとnoremapの2つの種類がある。mapはキーシーケンスを展開した後、さらに別のマップを適用しようとする。noremapは一度だけ展開する
	- キーマッピングの設定はモードごとに独立している。例えば、ノーマルモードで定義したマッピングは挿入モードでは適用されない。モードごとにマッピングを定義するコマンドが分かれている。最初の文字で判別可能。
	- キーマッピングのオプション
		- <silent>
			コマンドラインへの出力を抑制。キーマッピングからコマンドを実行する場合に指定
		- <unique>
			既にマッピングが存在する場合にエラーにする。デフォルトは上書きになる
		- <buffer>
			バッファローカルなキーマッピングを定義する
		- <expr>	
			マップの先の文字列をVimの式とみなして、評価した結果の文字列をマップ先とする
	- 特殊なキー
		スペースやEnter, Controlの同時押しなどは<>で囲む記法を使う
		

## 参考
[vimrc基礎文法最速マスター \- 永遠に未完成](https://thinca.hatenablog.com/entry/20100205/1265307642)